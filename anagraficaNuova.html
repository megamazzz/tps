<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anagrafica 2.0</title>

    <style>
      body {
        background-color: #0f172a;
        color: #fff;
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1 {
        color: #f97316;
        margin-top: 20px;
      }
      .tabellaAnagrafica {
        width: 80%;
        margin-top: 20px;
        border-collapse: collapse;
        background-color: #1e293b;
        border-radius: 8px;
        overflow: hidden;
      }
      .tabellaAnagrafica th,
      .tabellaAnagrafica td {
        padding: 12px 15px;
        text-align: center;
        border: 1px solid #333;
        font-size: 14px;
      }
      .tabellaAnagrafica th {
        background-color: #374151;
        color: #fff;
        font-weight: bold;
      }
      .tabellaAnagrafica td {
        background-color: #2d3748;
        color: #e2e8f0;
      }
      .tabellaAnagrafica tr:nth-child(even) {
        background-color: #3b4a61;
      }
      .tabellaAnagrafica tr:hover {
        background-color: #4b5563;
      }
    </style>
  </head>

  <body onload="loadDoc()">
    <h1>Anagrafica 2.0</h1>
    <div id="demo"></div>

    <script>
      function loadDoc() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            myFunction(this);
          }
        };
        xhttp.open(
          "GET","https://raw.githubusercontent.com/megamazzz/tps/refs/heads/main/anagrafica2.0.xml",true);
        xhttp.send();
      }

      function myFunction(xml) {
        var parser = new DOMParser();
        var xmlDoc = parser.parseFromString(xml.responseText, "text/xml");

        var table =
          "<table class='tabellaAnagrafica'>" +
          "<tr><th>Nome</th><th>Cognome</th><th>Data di nascita</th></tr>";

        var x = xmlDoc.getElementsByTagName("persona");

        for (let i = 0; i < x.length; i++) {
          let nome = x[i].getElementsByTagName("nome")[0].textContent;
          let cognome = x[i].getElementsByTagName("cognome")[0].textContent;
          let data = x[i].getElementsByTagName("dataDiNascita")[0].textContent;

        table += `<tr><td>${nome}</td><td>${cognome}</td><td>${data}</td></tr>`;

        }

        table += "</table>";
        document.getElementById("demo").innerHTML = table;
      }
    </script>
  </body>
</html>
